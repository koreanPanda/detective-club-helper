<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Detective Club Helper</title>

<style>
/* ===== Base ===== */
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;
  background:#f5f6fa;
  color:#111;
  -webkit-user-select:none;
  user-select:none;
  -webkit-touch-callout:none;
}
button,input{
  font-family:inherit;
}
input{
  -webkit-user-select:text;
  user-select:text;
}

/* ===== Layout ===== */
.screen{padding:18px;max-width:520px;margin:0 auto}
.card{
  background:#fff;
  border-radius:16px;
  padding:18px;
  box-shadow:0 12px 30px rgba(0,0,0,.08);
  margin-bottom:14px;
}
h1{margin:0 0 6px;font-size:22px}
.sub{color:#555;font-size:13px}

/* ===== Buttons ===== */
.btn{
  width:100%;
  border:none;
  border-radius:12px;
  padding:14px;
  font-weight:700;
  font-size:15px;
  background:#111;
  color:#fff;
}
.btn.ghost{
  background:#eee;
  color:#111;
}
.btnRow{display:flex;gap:10px}

/* ===== Mode ===== */
.mode{
  display:flex;
  gap:10px;
}
.mode label{
  flex:1;
  padding:14px;
  border-radius:14px;
  border:2px solid #ddd;
  text-align:center;
  font-weight:800;
}
.mode input{display:none}
.mode input:checked + label{
  border-color:#111;
  background:#111;
  color:#fff;
}

/* ===== Hold reveal ===== */
.hold{
  background:#111;
  color:#fff;
  border-radius:18px;
  height:140px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:900;
}
.hint{font-size:13px;color:#777;text-align:center;margin-top:8px}

/* ===== Roulette ===== */
.rouletteBox{
  position:relative;
  background:#111;
  color:#fff;
  border-radius:18px;
  padding:30px 12px;
  text-align:center;
}
.rouletteName{
  font-size:28px;
  font-weight:1000;
}

/* ===== Victory UI ===== */
.liarBanner{
  position:absolute;
  top:-18px;
  left:50%;
  transform:translateX(-50%) translateY(-20px) scale(.95);
  background:#111;
  color:#fff;
  padding:8px 18px;
  border-radius:999px;
  font-weight:900;
  letter-spacing:.04em;
  opacity:0;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
.liarBanner.show{
  animation:bannerDrop .55s cubic-bezier(.2,1.4,.3,1) forwards;
}
@keyframes bannerDrop{
  to{opacity:1;transform:translateX(-50%) translateY(0) scale(1)}
}

.liarStamp{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:32px;
  font-weight:1000;
  color:#c62828;
  text-align:center;
  transform:rotate(-12deg) scale(1.8);
  opacity:0;
  pointer-events:none;
  text-shadow:0 3px 0 rgba(0,0,0,.25);
}
.liarStamp.show{
  animation:stampHit .45s cubic-bezier(.2,1.6,.4,1) forwards;
}
@keyframes stampHit{
  0%{opacity:0;transform:rotate(-12deg) scale(2.4)}
  60%{opacity:1;transform:rotate(-12deg) scale(.92)}
  100%{opacity:1;transform:rotate(-12deg) scale(1)}
}
</style>
</head>

<body>
<div class="screen" id="app"></div>

<script>
/* ===== State ===== */
let state={
  screen:"home",
  mode:"lite",
  players:[],
  presenter:0,
  keyword:"",
  liar:null,
  rouletteIdx:0,
  accCount:0
};

const app=document.getElementById("app");

/* ===== Utils ===== */
const rand=(n)=>Math.floor(Math.random()*n);
const nextOrder=(n,start)=>{
  const arr=[];
  for(let i=1;i<n;i++)arr.push((start+i)%n);
  return arr;
};

/* ===== Screens ===== */
function render(){
  app.innerHTML="";
  if(state.screen==="home") home();
  if(state.screen==="reveal") reveal();
  if(state.screen==="roulette") roulette();
}

/* ===== Home ===== */
function home(){
  app.innerHTML=`
  <div class="card">
    <h1>Detective Club Helper</h1>
    <div class="sub">ë””í…í‹°ë¸Œ í´ëŸ½ ë³´ë“œê²Œì„ Â· made by ë² ì´ì˜¤ë½ì‹¤ with ChatGPT</div>
  </div>

  <div class="card">
    <div class="mode">
      <input type="radio" id="m1" name="m" checked onchange="state.mode='lite'">
      <label for="m1">LITE<br><span class="sub">ì˜¤í”„ë¼ì¸ í† í°</span></label>
      <input type="radio" id="m2" name="m" onchange="state.mode='full'">
      <label for="m2">FULL<br><span class="sub">ì»´í¬ë„ŒíŠ¸ ì—†ì„ ë•Œ</span></label>
    </div>
  </div>

  <div class="card">
    <input placeholder="ì°¸ê°€ì ì´ë¦„ (ì‰¼í‘œë¡œ êµ¬ë¶„)" style="width:100%;padding:12px;border-radius:10px;border:1px solid #ddd"
      oninput="state.players=this.value.split(',').map(v=>v.trim()).filter(Boolean)">
  </div>

  <button class="btn" onclick="start()">ì‹œì‘</button>
  `;
}

/* ===== Start ===== */
function start(){
  if(state.players.length<3)return alert("3ëª… ì´ìƒ í•„ìš”");
  state.presenter=0;
  state.keyword=prompt("ì œì‹œì–´ ì…ë ¥");
  state.liar=rand(state.players.length);
  state.order=nextOrder(state.players.length,state.presenter);
  state.revealIdx=0;
  state.screen="reveal";
  render();
}

/* ===== Reveal ===== */
function reveal(){
  const idx=state.order[state.revealIdx];
  const isLiar=idx===state.liar;
  app.innerHTML=`
    <div class="card">
      <div class="hold">${isLiar?"ë‹¹ì‹ ì€ ë¼ì´ì–´":"ì œì‹œì–´: "+state.keyword}</div>
      <div class="hint">2ì´ˆê°„ ëˆŒëŸ¬ í™•ì¸ í›„ ë‹¤ìŒ ì‚¬ëŒì—ê²Œ ì „ë‹¬</div>
    </div>
    <button class="btn" onclick="nextReveal()">ë‹¤ìŒ</button>
    <button class="btn ghost" onclick="location.reload()">ë¼ìš´ë“œ ì´ˆê¸°í™”</button>
  `;
}

function nextReveal(){
  state.revealIdx++;
  if(state.revealIdx>=state.order.length){
    state.screen="roulette";
  }
  render();
}

/* ===== Roulette ===== */
function roulette(){
  app.innerHTML=`
    <div class="card">
      <div class="rouletteBox" id="rb">
        <div class="liarBanner" id="lb">ğŸ‘‘ LIAR WINS</div>
        <div class="liarStamp" id="ls">PERFECT<br>BLUFF</div>
        <div class="rouletteName" id="rn">ë¼ì´ì–´ëŠ” ëˆ„êµ¬ì¼ê¹Œìš”?</div>
      </div>
    </div>
    <button class="btn" onclick="spin()">í™•ì¸</button>
  `;
}

function spin(){
  const rn=document.getElementById("rn");
  let i=0;
  const t=setInterval(()=>{
    rn.textContent=state.players[i%state.players.length];
    i++;
  },80);
  setTimeout(()=>{
    clearInterval(t);
    rn.textContent=state.players[state.liar];
    if(state.accCount<=1){
      document.getElementById("lb").classList.add("show");
      setTimeout(()=>document.getElementById("ls").classList.add("show"),200);
    }
  },1400);
}

render();
</script>
</body>
</html>
